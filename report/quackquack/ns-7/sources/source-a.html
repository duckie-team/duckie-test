


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > FabKt</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">team.duckie.quackquack.ui.component</a>
</div>

<h1>Coverage Summary for Class: FabKt (team.duckie.quackquack.ui.component)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">FabKt</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/44)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/88)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/546)
  </span>
</td>
</tr>
  <tr>
    <td class="name">FabKt$QuackFabImpl$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/76)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackFabImpl$2</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/38)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$2$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$2$2$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$invoke$$inlined$itemsIndexed$default$1</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$invoke$$inlined$itemsIndexed$default$2</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$1$1$1$invoke$$inlined$itemsIndexed$default$3</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">FabKt$QuackMenuFab$2</td>
    <td class="coverageStat"/>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/56)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/112)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/719)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Designed and developed by 2022 SungbinLand, Team Duckie
&nbsp; *
&nbsp; * Licensed under the MIT.
&nbsp; * Please see full license: https://github.com/duckie-team/duckie-quack-quack/blob/main/LICENSE
&nbsp; */
&nbsp;
&nbsp;package team.duckie.quackquack.ui.component
&nbsp;
&nbsp;import androidx.compose.animation.AnimatedVisibility
&nbsp;import androidx.compose.animation.core.animateFloatAsState
&nbsp;import androidx.compose.animation.expandVertically
&nbsp;import androidx.compose.animation.fadeIn
&nbsp;import androidx.compose.animation.fadeOut
&nbsp;import androidx.compose.animation.shrinkVertically
&nbsp;import androidx.compose.foundation.background
&nbsp;import androidx.compose.foundation.layout.Arrangement
&nbsp;import androidx.compose.foundation.layout.Box
&nbsp;import androidx.compose.foundation.layout.Column
&nbsp;import androidx.compose.foundation.layout.PaddingValues
&nbsp;import androidx.compose.foundation.layout.Row
&nbsp;import androidx.compose.foundation.layout.padding
&nbsp;import androidx.compose.foundation.layout.size
&nbsp;import androidx.compose.foundation.layout.width
&nbsp;import androidx.compose.foundation.layout.wrapContentSize
&nbsp;import androidx.compose.foundation.layout.wrapContentWidth
&nbsp;import androidx.compose.foundation.lazy.LazyColumn
&nbsp;import androidx.compose.foundation.lazy.itemsIndexed
&nbsp;import androidx.compose.foundation.shape.CircleShape
&nbsp;import androidx.compose.foundation.shape.RoundedCornerShape
&nbsp;import androidx.compose.runtime.Composable
&nbsp;import androidx.compose.runtime.Immutable
&nbsp;import androidx.compose.runtime.NonRestartableComposable
&nbsp;import androidx.compose.runtime.mutableStateListOf
&nbsp;import androidx.compose.runtime.remember
&nbsp;import androidx.compose.ui.Alignment
&nbsp;import androidx.compose.ui.Modifier
&nbsp;import androidx.compose.ui.draw.clip
&nbsp;import androidx.compose.ui.draw.rotate
&nbsp;import androidx.compose.ui.layout.onSizeChanged
&nbsp;import androidx.compose.ui.platform.LocalDensity
&nbsp;import androidx.compose.ui.unit.DpSize
&nbsp;import androidx.compose.ui.unit.dp
&nbsp;import kotlinx.collections.immutable.PersistentList
&nbsp;import team.duckie.quackquack.ui.animation.QuackAnimationSpec
&nbsp;import team.duckie.quackquack.ui.color.QuackColor
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackText
&nbsp;import team.duckie.quackquack.ui.icon.QuackIcon
&nbsp;import team.duckie.quackquack.ui.modifier.quackClickable
&nbsp;import team.duckie.quackquack.ui.textstyle.QuackTextStyle
&nbsp;
<b class="nc">&nbsp;private val QuackFabContainerElevation = 3.dp</b>
&nbsp;
<b class="nc">&nbsp;private val QuackFabContainerShape = CircleShape</b>
<b class="nc">&nbsp;private val QuackFabMenuShape = RoundedCornerShape(</b>
<b class="nc">&nbsp;    size = 12.dp,</b>
&nbsp;)
&nbsp;
<b class="nc">&nbsp;private val QuackFabContainerSize = 48.dp</b>
&nbsp;
<b class="nc">&nbsp;private val QuackFabIconResource = QuackIcon.Plus</b>
<b class="nc">&nbsp;private val QuackFabIconTint = QuackColor.White</b>
<b class="nc">&nbsp;private val QuackFabIconSize = DpSize(</b>
<b class="nc">&nbsp;    width = 20.dp,</b>
<b class="nc">&nbsp;    height = 20.dp,</b>
&nbsp;)
&nbsp;private const val QuackFabIconRotate = 45f
<b class="nc">&nbsp;private val QuackFabMenuIconSize = DpSize(</b>
<b class="nc">&nbsp;    width = 24.dp,</b>
<b class="nc">&nbsp;    height = 24.dp,</b>
&nbsp;)
&nbsp;
<b class="nc">&nbsp;private val QuackFabContainerColor = QuackColor.DuckieOrange</b>
<b class="nc">&nbsp;private val QuackFabMenuBackgroundColor = QuackColor.White</b>
<b class="nc">&nbsp;private val QuackFabMenuItemColor = QuackColor.Black</b>
&nbsp;
<b class="nc">&nbsp;private val QuackFabMenuItemTextStyle = QuackTextStyle.Subtitle.change(</b>
<b class="nc">&nbsp;    color = QuackFabMenuItemColor</b>
&nbsp;)
&nbsp;
<b class="nc">&nbsp;private val QuackFabMenuPadding = PaddingValues(</b>
<b class="nc">&nbsp;    horizontal = 16.dp - 8.dp,</b>
<b class="nc">&nbsp;    vertical = 20.dp - 8.dp,</b>
&nbsp;)
<b class="nc">&nbsp;private val QuackFabAndMenuSpace = 8.dp</b>
<b class="nc">&nbsp;private val QuackFabMenuHorizontalPadding = 8.dp</b>
<b class="nc">&nbsp;private val QuackMenuContentSpacedBy = 4.dp</b>
<b class="nc">&nbsp;private val QuackFabMenuTextPadding = PaddingValues(</b>
<b class="nc">&nbsp;    vertical = 3.dp + 8.dp,</b>
&nbsp;)
&nbsp;
&nbsp;/**
&nbsp; * 꽥꽥의 기본 FloatingActionButton 을 그립니다.
&nbsp; *
&nbsp; * @param icon 이 FAB 에 표시할 아이콘
&nbsp; * @param onClick 이 FAB 이 클릭됐을 때 호출될 람다
&nbsp; */
&nbsp;@Composable
&nbsp;@NonRestartableComposable
&nbsp;public fun QuackFab(
&nbsp;    icon: QuackIcon,
&nbsp;    onClick: () -&gt; Unit,
<b class="nc">&nbsp;): Unit = QuackFabImpl(</b>
<b class="nc">&nbsp;    icon = icon,</b>
<b class="nc">&nbsp;    onClick = onClick,</b>
<b class="nc">&nbsp;    rotate = 0f,</b>
&nbsp;)
&nbsp;
&nbsp;/**
&nbsp; * 꽥꽥의 기본 FloatingActionButton 을 실제로 그립니다.
&nbsp; *
&nbsp; * @param icon 이 FAB 에 표시할 아이콘
&nbsp; * @param onClick 이 FAB 이 클릭됐을 때 호출될 람다
&nbsp; * @param rotate [icon] 의 회전 정도
&nbsp; */
&nbsp;@Composable
&nbsp;private fun QuackFabImpl(
&nbsp;    icon: QuackIcon,
&nbsp;    onClick: () -&gt; Unit,
&nbsp;    rotate: Float,
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    QuackSurface(</b>
<b class="nc">&nbsp;        modifier = Modifier.size(</b>
<b class="nc">&nbsp;            size = QuackFabContainerSize,</b>
&nbsp;        ),
<b class="nc">&nbsp;        shape = QuackFabContainerShape,</b>
<b class="nc">&nbsp;        backgroundColor = QuackFabContainerColor,</b>
<b class="nc">&nbsp;        elevation = QuackFabContainerElevation,</b>
<b class="nc">&nbsp;        onClick = onClick,</b>
<b class="nc">&nbsp;    ) {</b>
<b class="nc">&nbsp;        Box(</b>
&nbsp;            // needs for set size in box inlining
<b class="nc">&nbsp;            modifier = Modifier.size(</b>
<b class="nc">&nbsp;                size = QuackFabIconSize,</b>
&nbsp;            ),
&nbsp;        ) {
<b class="nc">&nbsp;            QuackImageInternal(</b>
<b class="nc">&nbsp;                modifier = Modifier.rotate(</b>
<b class="nc">&nbsp;                    degrees = rotate,</b>
&nbsp;                ),
<b class="nc">&nbsp;                src = icon,</b>
<b class="nc">&nbsp;                overrideSize = QuackFabIconSize,</b>
<b class="nc">&nbsp;                tint = QuackFabIconTint,</b>
<b class="nc">&nbsp;            )</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;/**
&nbsp; * [QuackMenuFab] 에서 표시할 아이템
&nbsp; *
&nbsp; * @param icon 메뉴에 표시될 아이콘
&nbsp; * @param text 메뉴에 표시될 텍스트
&nbsp; */
&nbsp;@Immutable
&nbsp;public data class QuackMenuFabItem(
&nbsp;    public val icon: QuackIcon,
&nbsp;    public val text: String,
&nbsp;)
&nbsp;
&nbsp;/**
&nbsp; * [QuackFab] 위에 팝업 메뉴를 추가로 그립니다.
&nbsp; *
&nbsp; * 꽥꽥의 경우 팝업이 있는 FAB 은 항상 [QuackIcon.Plus] 아이콘을 사용하고, [45도][QuackFabIconRotate] 회전하는
&nbsp; * 형태를 갖고 있습니다. 또한 메뉴는 FAB 의 위치에서 8 dp 만큼 위로 떨어져 있습니다.
&nbsp; * 이를 구현하기 위해 FAB 와 메뉴를 [Column] 으로 감싸 하나로 처리합니다.
&nbsp; *
&nbsp; * @param items 메뉴에 표시할 아이템들
&nbsp; * @param expanded FAB 이 expand 됐는지 여부. 만약 true 이면
&nbsp; * FAB 의 아이콘이 [45도][QuackFabIconRotate] 회전하고, 메뉴가 표시됩니다.
&nbsp; * @param onFabClick FAB 이 클릭됐을 때 실행될 람다
&nbsp; * @param onItemClick 메뉴의 아이템이 클릭됐을 때 실행될 람다
&nbsp; */
&nbsp;@Composable
&nbsp;public fun QuackMenuFab(
&nbsp;    items: PersistentList&lt;QuackMenuFabItem&gt;,
&nbsp;    expanded: Boolean,
&nbsp;    onFabClick: () -&gt; Unit,
&nbsp;    onItemClick: (index: Int, item: QuackMenuFabItem) -&gt; Unit,
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    val density = LocalDensity.current</b>
<b class="nc">&nbsp;    val textWidths = remember(</b>
&nbsp;        key1 = items,
&nbsp;    ) {
<b class="nc">&nbsp;        mutableStateListOf(</b>
<b class="nc">&nbsp;            elements = Array(</b>
<b class="nc">&nbsp;                size = items.size,</b>
<b class="nc">&nbsp;                init = { 0.dp },</b>
&nbsp;            )
&nbsp;        )
&nbsp;    }
<b class="nc">&nbsp;    val textWidthModifier = remember(</b>
&nbsp;        key1 = items,
<b class="nc">&nbsp;        key2 = textWidths.all { width -&gt;</b>
<b class="nc">&nbsp;            width.value != 0f</b>
&nbsp;        },
&nbsp;    ) {
<b class="nc">&nbsp;        when (</b>
<b class="nc">&nbsp;            textWidths.all { width -&gt;</b>
<b class="nc">&nbsp;                width.value != 0f</b>
&nbsp;            }
&nbsp;        ) {
<b class="nc">&nbsp;            true -&gt; Modifier.width(</b>
<b class="nc">&nbsp;                width = textWidths.max(),</b>
&nbsp;            )
<b class="nc">&nbsp;            else -&gt; Modifier.wrapContentWidth()</b>
&nbsp;        }
&nbsp;    }
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        modifier = Modifier.wrapContentSize(),</b>
<b class="nc">&nbsp;        verticalArrangement = Arrangement.spacedBy(</b>
<b class="nc">&nbsp;            space = QuackFabAndMenuSpace,</b>
&nbsp;        ),
<b class="nc">&nbsp;        horizontalAlignment = Alignment.End,</b>
&nbsp;    ) {
<b class="nc">&nbsp;        AnimatedVisibility(</b>
<b class="nc">&nbsp;            modifier = Modifier</b>
<b class="nc">&nbsp;                .wrapContentSize()</b>
<b class="nc">&nbsp;                .background(</b>
<b class="nc">&nbsp;                    color = QuackFabMenuBackgroundColor.composeColor,</b>
<b class="nc">&nbsp;                    shape = QuackFabMenuShape,</b>
&nbsp;                )
<b class="nc">&nbsp;                .clip(</b>
<b class="nc">&nbsp;                    shape = QuackFabMenuShape,</b>
&nbsp;                ),
<b class="nc">&nbsp;            visible = expanded,</b>
<b class="nc">&nbsp;            enter = fadeIn(</b>
<b class="nc">&nbsp;                animationSpec = QuackAnimationSpec(),</b>
<b class="nc">&nbsp;            ) + expandVertically(</b>
<b class="nc">&nbsp;                animationSpec = QuackAnimationSpec(),</b>
&nbsp;            ),
<b class="nc">&nbsp;            exit = fadeOut(</b>
<b class="nc">&nbsp;                animationSpec = QuackAnimationSpec(),</b>
<b class="nc">&nbsp;            ) + shrinkVertically(</b>
<b class="nc">&nbsp;                animationSpec = QuackAnimationSpec(),</b>
&nbsp;            ),
<b class="nc">&nbsp;        ) {</b>
<b class="nc">&nbsp;            LazyColumn(</b>
<b class="nc">&nbsp;                modifier = Modifier.wrapContentSize(),</b>
<b class="nc">&nbsp;                contentPadding = QuackFabMenuPadding,</b>
&nbsp;            ) {
<b class="nc">&nbsp;                itemsIndexed(</b>
<b class="nc">&nbsp;                    items = items,</b>
<b class="nc">&nbsp;                    key = { _, item -&gt; item.text },</b>
&nbsp;                ) { index, item -&gt;
&nbsp;                    Row(
&nbsp;                        modifier = Modifier
&nbsp;                            .wrapContentSize()
&nbsp;                            .quackClickable(
&nbsp;                                rippleEnabled = false,
&nbsp;                                onClick = {
<b class="nc">&nbsp;                                    onItemClick(</b>
&nbsp;                                        /*index = */
<b class="nc">&nbsp;                                        index,</b>
&nbsp;                                        /*item = */
<b class="nc">&nbsp;                                        item,</b>
&nbsp;                                    )
&nbsp;                                },
&nbsp;                            ),
&nbsp;                        verticalAlignment = Alignment.CenterVertically,
&nbsp;                        horizontalArrangement = Arrangement.spacedBy(
&nbsp;                            space = QuackMenuContentSpacedBy,
&nbsp;                        ),
&nbsp;                    ) {
&nbsp;                        QuackImageInternal(
&nbsp;                            modifier = Modifier.padding(
&nbsp;                                start = QuackFabMenuHorizontalPadding,
&nbsp;                            ),
&nbsp;                            src = item.icon,
&nbsp;                            overrideSize = QuackFabMenuIconSize,
&nbsp;                            tint = QuackFabMenuItemColor,
&nbsp;                        )
&nbsp;                        QuackText(
&nbsp;                            modifier = Modifier
&nbsp;                                .then(
&nbsp;                                    other = textWidthModifier,
&nbsp;                                )
&nbsp;                                .onSizeChanged { size -&gt;
<b class="nc">&nbsp;                                    with(</b>
<b class="nc">&nbsp;                                        receiver = density,</b>
&nbsp;                                    ) {
<b class="nc">&nbsp;                                        textWidths[index] = size.width.toDp()</b>
<b class="nc">&nbsp;                                    }</b>
&nbsp;                                }
&nbsp;                                .padding(
&nbsp;                                    paddingValues = QuackFabMenuTextPadding,
&nbsp;                                )
&nbsp;                                .padding(
&nbsp;                                    end = QuackFabMenuHorizontalPadding,
&nbsp;                                ),
&nbsp;                            text = item.text,
&nbsp;                            style = QuackFabMenuItemTextStyle,
&nbsp;                        )
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        QuackFabImpl(</b>
<b class="nc">&nbsp;            icon = QuackFabIconResource,</b>
<b class="nc">&nbsp;            onClick = onFabClick,</b>
<b class="nc">&nbsp;            rotate = animateFloatAsState(</b>
<b class="nc">&nbsp;                targetValue = if (expanded) QuackFabIconRotate else 0f,</b>
<b class="nc">&nbsp;                animationSpec = QuackAnimationSpec(),</b>
<b class="nc">&nbsp;            ).value,</b>
<b class="nc">&nbsp;        )</b>
<b class="nc">&nbsp;    }</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-11-09 11:34</div>
</div>
</body>
</html>
