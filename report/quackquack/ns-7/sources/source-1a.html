


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > TextfieldKt</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">team.duckie.quackquack.ui.component</a>
</div>

<h1>Coverage Summary for Class: TextfieldKt (team.duckie.quackquack.ui.component)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">TextfieldKt</td>
<td class="coverageStat">
  <span class="percent">
    85.7%
  </span>
  <span class="absValue">
    (6/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    28%
  </span>
  <span class="absValue">
    (99/354)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    82.9%
  </span>
  <span class="absValue">
    (145/175)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    55.4%
  </span>
  <span class="absValue">
    (1155/2084)
  </span>
</td>
</tr>
  <tr>
    <td class="name">TextfieldKt$QuackBasicTextField$$inlined$drawUnderBarWithAnimation-wGxdb_0$default$1</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackBasicTextField$$inlined$drawUnderBarWithAnimation-wGxdb_0$default$1$1</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackBasicTextField$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    64.3%
  </span>
  <span class="absValue">
    (9/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    88.9%
  </span>
  <span class="absValue">
    (8/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    83.3%
  </span>
  <span class="absValue">
    (60/72)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackBasicTextField$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    37.5%
  </span>
  <span class="absValue">
    (3/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    85.7%
  </span>
  <span class="absValue">
    (6/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    76.9%
  </span>
  <span class="absValue">
    (40/52)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackBasicTextField$2</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackCountableTextField$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackCountableTextField$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/39)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackCountableTextField$3</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextField$2</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextField$3$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextField$4$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextField$4$1$2</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    87.5%
  </span>
  <span class="absValue">
    (7/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    91.8%
  </span>
  <span class="absValue">
    (56/61)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextField$5</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">TextfieldKt$QuackTextFieldDecorationBox$2</td>
    <td class="coverageStat"/>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    80%
  </span>
  <span class="absValue">
    (12/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    29%
  </span>
  <span class="absValue">
    (113/390)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    81.2%
  </span>
  <span class="absValue">
    (169/208)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    56.7%
  </span>
  <span class="absValue">
    (1318/2325)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Designed and developed by 2022 SungbinLand, Team Duckie
&nbsp; *
&nbsp; * Licensed under the MIT.
&nbsp; * Please see full license: https://github.com/duckie-team/quack-quack-android/blob/master/LICENSE
&nbsp; */
&nbsp;
&nbsp;@file:NoLiveLiterals
&nbsp;
&nbsp;package team.duckie.quackquack.ui.component
&nbsp;
&nbsp;import androidx.compose.animation.AnimatedVisibility
&nbsp;import androidx.compose.animation.expandVertically
&nbsp;import androidx.compose.animation.fadeIn
&nbsp;import androidx.compose.animation.fadeOut
&nbsp;import androidx.compose.animation.shrinkVertically
&nbsp;import androidx.compose.foundation.background
&nbsp;import androidx.compose.foundation.layout.Box
&nbsp;import androidx.compose.foundation.layout.Column
&nbsp;import androidx.compose.foundation.layout.PaddingValues
&nbsp;import androidx.compose.foundation.layout.padding
&nbsp;import androidx.compose.foundation.layout.wrapContentSize
&nbsp;import androidx.compose.foundation.text.BasicTextField
&nbsp;import androidx.compose.foundation.text.KeyboardActions
&nbsp;import androidx.compose.foundation.text.KeyboardOptions
&nbsp;import androidx.compose.material.Text
&nbsp;import androidx.compose.runtime.Composable
&nbsp;import androidx.compose.runtime.Immutable
&nbsp;import androidx.compose.runtime.NoLiveLiterals
&nbsp;import androidx.compose.runtime.Stable
&nbsp;import androidx.compose.runtime.remember
&nbsp;import androidx.compose.ui.Alignment
&nbsp;import androidx.compose.ui.Modifier
&nbsp;import androidx.compose.ui.draw.drawWithContent
&nbsp;import androidx.compose.ui.focus.FocusRequester
&nbsp;import androidx.compose.ui.focus.focusRequester
&nbsp;import androidx.compose.ui.focus.onFocusChanged
&nbsp;import androidx.compose.ui.layout.Layout
&nbsp;import androidx.compose.ui.layout.layoutId
&nbsp;import androidx.compose.ui.text.font.FontWeight
&nbsp;import androidx.compose.ui.text.input.ImeAction
&nbsp;import androidx.compose.ui.text.style.TextOverflow
&nbsp;import androidx.compose.ui.unit.dp
&nbsp;import androidx.compose.ui.zIndex
&nbsp;import team.duckie.quackquack.ui.animation.QuackAnimationSpec
&nbsp;import team.duckie.quackquack.ui.color.QuackColor
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackTextFieldLayoutId
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackTextFieldLeadingContentLayoutId
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackTextFieldMeasurePolicy.Companion.rememberQuackTextFieldMeasurePolicy
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackTextFieldPlaceholderLayoutId
&nbsp;import team.duckie.quackquack.ui.component.internal.QuackTextFieldTrailingContentLayoutId
&nbsp;import team.duckie.quackquack.ui.constant.QuackHeight
&nbsp;import team.duckie.quackquack.ui.constant.QuackWidth
&nbsp;import team.duckie.quackquack.ui.modifier.applyQuackSize
&nbsp;import team.duckie.quackquack.ui.modifier.drawUnderBarWithAnimation
&nbsp;import team.duckie.quackquack.ui.textstyle.QuackTextStyle
&nbsp;import team.duckie.quackquack.ui.theme.LocalQuackTextFieldColors
&nbsp;import team.duckie.quackquack.ui.util.DoNotUseDirectly
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에서 표시할 텍스트의 [FontWeight] 에 따라 QuackTextField 의
&nbsp; * 높이가 달라집니다. 이를 계산하기 위해 사용됩니다.
&nbsp; *
&nbsp; * 만약 [FontWeight] 가 [FontWeight.Bold] 라면 TextField 에서 16dp 만큼 추가 높이를 갖고,
&nbsp; * 그렇지 않다면 18dp 만큼 추가 높이를 갖습니다.
&nbsp; *
&nbsp; * 좀 더 많은 경우를 신경쓰기 위해선 [FontWeight.Bold] 보다 큰 경우도 체크하면 좋지만,
&nbsp; * 현재 QuackTextField 의 디자인에는 최대 [FontWeight.Bold] 만 사용하고 있기 때문에
&nbsp; * [FontWeight.Bold] 만 체크합니다.
&nbsp; *
&nbsp; * @receiver [FontWeight] 가 [FontWeight.Bold] 인지 검사할 [QuackTextStyle]
&nbsp; * @return QuackTextField 에서 표시할 텍스트의 [FontWeight] 가 [FontWeight.Bold] 인지 여부
&nbsp; */
<b class="fc">&nbsp;private val QuackTextStyle.isBold get() = weight == FontWeight.Bold</b>
&nbsp;
&nbsp;/**
&nbsp; * This padding adds spaces in between the text-field and decoration content i.e leading and trailing content
&nbsp; * ```
&nbsp; * Decoration - TextField - Decoration
&nbsp; * ```
&nbsp; *
&nbsp; * As an example, see [this](https://user-images.githubusercontent.com/40740128/189829870-cba93fd6-d5f4-4016-b826-c6093cfbb386.png) image,
&nbsp; * the decoration item is the part inside the orange rectangle,
&nbsp; * and the TextField is the &quot;placeholder&quot; part.
&nbsp; */
<b class="fc">&nbsp;private val QuackTextFieldDecorationContentHorizontalPadding = 8.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 밑에 표시될 ErrorText 와의 간격
&nbsp; */
<b class="fc">&nbsp;private val QuackTextFieldErrorTextTopPadding = 4.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에서 표시하는 텍스트의 [FontWeight] 가
&nbsp; * [FontWeight.Bold] 가 아닐 때 TextField 위에 들어갈 패딩
&nbsp; *
&nbsp; * QuackTextField 의 높이를 결정짓는 중요한 요소가 됩니다.
&nbsp; *
&nbsp; * **이 API 는 직접적으로 사용하면 안됩니다.**
&nbsp; * 대신에 [QuackTextStyle.calcQuackTextFieldTopPadding] 를 사용하세요.
&nbsp; *
&nbsp; * @see QuackTextStyle.isBold
&nbsp; */
&nbsp;@DoNotUseDirectly
<b class="fc">&nbsp;private val QuackTextFieldTopPaddingWithNonBold = 18.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에서 표시하는 텍스트의 [FontWeight] 가
&nbsp; * [FontWeight.Bold] 일 때 TextField 위에 들어갈 패딩
&nbsp; *
&nbsp; * QuackTextField 의 높이를 결정짓는 중요한 요소가 됩니다.
&nbsp; *
&nbsp; * **이 API 는 직접적으로 사용하면 안됩니다.**
&nbsp; * 대신에 [QuackTextStyle.calcQuackTextFieldTopPadding] 를 사용하세요.
&nbsp; *
&nbsp; * @see QuackTextStyle.isBold
&nbsp; */
&nbsp;@DoNotUseDirectly
<b class="fc">&nbsp;private val QuackTextFieldTopPaddingWithBold = 16.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에서 표시하는 텍스트의 [FontWeight] 에 따라 TextField 위에 들어갈 패딩을 계산합니다.
&nbsp; *
&nbsp; * @return TextField 위에 들어갈 패딩
&nbsp; * @see QuackTextStyle.isBold
&nbsp; */
&nbsp;@OptIn(DoNotUseDirectly::class)
<b class="fc">&nbsp;private fun QuackTextStyle.calcQuackTextFieldTopPadding() = when (isBold) {</b>
<b class="pc">&nbsp;    true -&gt; QuackTextFieldTopPaddingWithBold</b>
<b class="fc">&nbsp;    else -&gt; QuackTextFieldTopPaddingWithNonBold</b>
&nbsp;}
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에 사용되는 TextField 의 하단에 들어갈 패딩
&nbsp; */
<b class="fc">&nbsp;private val QuackTextFieldBottomPadding = 8.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에 표시될 언더바의 높이
&nbsp; */
<b class="fc">&nbsp;private val QuackTextFieldUnderBarHeight = 1.dp</b>
&nbsp;
&nbsp;/**
&nbsp; * QuackTextField 에서 사용할 아이템들의 색상을 계산하기 위한
&nbsp; * 유틸 함수들이 있는 클래스 입니다.
&nbsp; */
&nbsp;@Immutable
&nbsp;private object QuackTextFieldColors {
&nbsp;    /**
&nbsp;     * QuackTextField 에 표시될 텍스트의 색상을 계산합니다.
&nbsp;     * placeholder 인지 여부에 따라 색상이 달라집니다.
&nbsp;     *
&nbsp;     * @param isPlaceholder placeholder 로 보여지고 있는지 여부
&nbsp;     * @return QuackTextField 에 표시될 텍스트의 색상
&nbsp;     */
&nbsp;    @Stable
&nbsp;    fun textColor(
&nbsp;        isPlaceholder: Boolean,
&nbsp;    ) = when (isPlaceholder) {
&nbsp;        true -&gt; QuackColor.Gray2
&nbsp;        else -&gt; QuackColor.Black
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * QuackTextField 에 표시될 언더바의 색상을 계산합니다.
&nbsp;     * 현재 에러 상태인지에 따라 색상이 달라집니다.
&nbsp;     *
&nbsp;     * @param isError 현재 QuackTextField 가 에러 상태인지 여부
&nbsp;     * @return QuackTextField 에 표시될 언더바의 색상
&nbsp;     */
&nbsp;    @Stable
&nbsp;    fun underBarColor(
&nbsp;        isError: Boolean,
&nbsp;    ) = when (isError) {
&nbsp;        true -&gt; QuackColor.OrangeRed
&nbsp;        else -&gt; QuackColor.Gray3
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;/**
&nbsp; * Draws the most basic QuackQuack&#39;s TextField.
&nbsp; * Add only decoration items that fit QuackTextField to BasicTextField.
&nbsp; *
&nbsp; * Always use [QuackAnimationSpec] as animationSpec.
&nbsp; *
&nbsp; * @param width Width of QuackTextField
&nbsp; * @param height height of QuackTextField
&nbsp; * @param text text to display
&nbsp; * @param onTextChanged Callback to be invoked when new text is entered
&nbsp; * @param textStyle The style of the text to be displayed.
&nbsp; * @param placeholderText A placeholder text to display when the entered
&nbsp; * [text] is empty. According to the design guide of QuackTextField, only
&nbsp; * single text can be placed in placeholder.
&nbsp; * @param isError Whether the QuackTextField is in error state
&nbsp; * @param errorText A text to display when the QuackTextField is in error state.
&nbsp; * @param errorTextStyle The style of the [errorText] to be displayed.
&nbsp; * @param leadingContent leading decoration content of QuackTextField
&nbsp; * @param trailingContent trailing decoration content of QuackTextField
&nbsp; * @param keyboardOptions keyboard options in QuackTextField
&nbsp; * @param keyboardActions Keyboard actions in QuackTextField
&nbsp; */
&nbsp;@Composable
&nbsp;public fun QuackTextField(
<b class="pc">&nbsp;    width: QuackWidth = QuackWidth.Fill,</b>
<b class="pc">&nbsp;    height: QuackHeight = QuackHeight.Wrap,</b>
&nbsp;    text: String,
&nbsp;    onTextChanged: (text: String) -&gt; Unit,
<b class="pc">&nbsp;    textStyle: QuackTextStyle = QuackTextStyle.Body1,</b>
<b class="nc">&nbsp;    placeholderText: String? = null,</b>
<b class="nc">&nbsp;    isError: Boolean = false,</b>
<b class="nc">&nbsp;    errorText: String? = null,</b>
&nbsp;    // needs remember?
<b class="fc">&nbsp;    errorTextStyle: QuackTextStyle = remember {</b>
<b class="fc">&nbsp;        QuackTextStyle.Body1.change(</b>
<b class="fc">&nbsp;            color = QuackColor.OrangeRed,</b>
&nbsp;        )
&nbsp;    },
<b class="nc">&nbsp;    leadingContent: (@Composable () -&gt; Unit)? = null,</b>
<b class="nc">&nbsp;    trailingContent: (@Composable () -&gt; Unit)? = null,</b>
<b class="pc">&nbsp;    keyboardOptions: KeyboardOptions = KeyboardOptions(</b>
<b class="fc">&nbsp;        imeAction = ImeAction.Done,</b>
&nbsp;    ),
<b class="pc">&nbsp;    keyboardActions: KeyboardActions = KeyboardActions(),</b>
<b class="pc">&nbsp;    focusRequester: FocusRequester = FocusRequester(),</b>
<b class="pc">&nbsp;    onFocusChanged: (Boolean) -&gt; Unit = {},</b>
<b class="pc">&nbsp;) {</b>
<b class="fc">&nbsp;    val errorComposeTextStyle = remember(</b>
&nbsp;        key1 = errorTextStyle,
&nbsp;    ) {
<b class="fc">&nbsp;        errorTextStyle.asComposeStyle()</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    Column(</b>
<b class="fc">&nbsp;        modifier = Modifier</b>
<b class="fc">&nbsp;            .wrapContentSize()</b>
<b class="fc">&nbsp;            .focusRequester(focusRequester)</b>
<b class="fc">&nbsp;            .onFocusChanged {</b>
<b class="fc">&nbsp;                onFocusChanged(it.isFocused)</b>
&nbsp;            },
&nbsp;    ) {
<b class="pc">&nbsp;        QuackBasicTextField(</b>
<b class="fc">&nbsp;            width = width,</b>
<b class="fc">&nbsp;            height = height,</b>
<b class="fc">&nbsp;            text = text,</b>
<b class="fc">&nbsp;            onTextChanged = onTextChanged,</b>
<b class="fc">&nbsp;            textStyle = textStyle,</b>
<b class="fc">&nbsp;            placeholderText = placeholderText,</b>
<b class="fc">&nbsp;            isError = isError,</b>
<b class="fc">&nbsp;            leadingContent = leadingContent,</b>
<b class="fc">&nbsp;            trailingContent = trailingContent,</b>
<b class="fc">&nbsp;            keyboardOptions = keyboardOptions,</b>
<b class="fc">&nbsp;            keyboardActions = keyboardActions,</b>
&nbsp;        )
&nbsp;        // 에러 상태 가능성이 있는 경우 에러 메시지가 표시될 공간을 항상
&nbsp;        // 확보하기 위해 미리 에러 메시지의 공간만 차지합니다.
&nbsp;        // 그렇지 않으면 에러 메시지가 보일 때 없던 공간이 갑자기 확장되면서
&nbsp;        // 순간적으로 레이아웃의 높이에 변동이 생깁니다.
<b class="fc">&nbsp;        Box(</b>
<b class="fc">&nbsp;            modifier = Modifier.wrapContentSize(),</b>
&nbsp;        ) {
<b class="pc">&nbsp;            if (errorText != null) {</b>
<b class="fc">&nbsp;                Text(</b>
<b class="fc">&nbsp;                    modifier = Modifier</b>
<b class="fc">&nbsp;                        .padding(</b>
<b class="fc">&nbsp;                            top = QuackTextFieldErrorTextTopPadding,</b>
&nbsp;                        )
<b class="fc">&nbsp;                        .zIndex(</b>
<b class="fc">&nbsp;                            zIndex = 1f,</b>
&nbsp;                        )
<b class="fc">&nbsp;                        .drawWithContent {},</b>
<b class="fc">&nbsp;                    text = errorText,</b>
<b class="fc">&nbsp;                    style = errorComposeTextStyle,</b>
&nbsp;                )
&nbsp;            }
<b class="fc">&nbsp;            this@Column.AnimatedVisibility(</b>
<b class="fc">&nbsp;                visible = isError,</b>
<b class="fc">&nbsp;                modifier = Modifier.zIndex(</b>
<b class="fc">&nbsp;                    zIndex = 2f,</b>
&nbsp;                ),
<b class="fc">&nbsp;                enter = fadeIn(</b>
<b class="fc">&nbsp;                    animationSpec = QuackAnimationSpec(),</b>
<b class="fc">&nbsp;                ) + expandVertically(</b>
<b class="fc">&nbsp;                    animationSpec = QuackAnimationSpec(),</b>
&nbsp;                ),
<b class="fc">&nbsp;                exit = fadeOut(</b>
<b class="fc">&nbsp;                    animationSpec = QuackAnimationSpec(),</b>
<b class="fc">&nbsp;                ) + shrinkVertically(</b>
<b class="fc">&nbsp;                    animationSpec = QuackAnimationSpec(),</b>
&nbsp;                ),
<b class="fc">&nbsp;            ) {</b>
<b class="pc">&nbsp;                checkNotNull(</b>
<b class="fc">&nbsp;                    value = errorText,</b>
&nbsp;                ) {
<b class="nc">&nbsp;                    &quot;errorText must not be null when isError is true&quot;</b>
&nbsp;                }
<b class="pc">&nbsp;                Text(</b>
<b class="fc">&nbsp;                    modifier = Modifier.padding(</b>
<b class="fc">&nbsp;                        top = QuackTextFieldErrorTextTopPadding,</b>
&nbsp;                    ),
<b class="fc">&nbsp;                    text = errorText,</b>
<b class="fc">&nbsp;                    style = errorComposeTextStyle,</b>
&nbsp;                )
<b class="nc">&nbsp;            }</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;/**
&nbsp; * Draws the most basic QuackQuack&#39;s TextField.
&nbsp; * Add only decoration items that fit QuackTextField to [BasicTextField].
&nbsp; *
&nbsp; * @param width Width of QuackTextField
&nbsp; * @param height height of QuackTextField
&nbsp; * @param text text to display
&nbsp; * @param onTextChanged Callback to be invoked when new text is entered
&nbsp; * @param textStyle The style of the text to be displayed.
&nbsp; * @param placeholderText A placeholder text to display when the entered [text] is empty
&nbsp; * @param isError Whether the QuackTextField is in error state
&nbsp; * @param leadingContent leading decoration content of QuackTextField
&nbsp; * @param trailingContent trailing decoration content of QuackTextField
&nbsp; * @param keyboardOptions keyboard options in QuackTextField
&nbsp; * @param keyboardActions Keyboard actions in QuackTextField
&nbsp; */
&nbsp;@Composable
&nbsp;internal fun QuackBasicTextField(
<b class="nc">&nbsp;    width: QuackWidth = QuackWidth.Fill,</b>
<b class="nc">&nbsp;    height: QuackHeight = QuackHeight.Wrap,</b>
&nbsp;    text: String,
&nbsp;    onTextChanged: (text: String) -&gt; Unit,
<b class="nc">&nbsp;    textStyle: QuackTextStyle = QuackTextStyle.Body1,</b>
<b class="nc">&nbsp;    placeholderText: String? = null,</b>
<b class="nc">&nbsp;    isError: Boolean = false,</b>
<b class="nc">&nbsp;    leadingContent: (@Composable () -&gt; Unit)? = null,</b>
<b class="nc">&nbsp;    trailingContent: (@Composable () -&gt; Unit)? = null,</b>
<b class="nc">&nbsp;    keyboardOptions: KeyboardOptions = KeyboardOptions(</b>
<b class="nc">&nbsp;        imeAction = ImeAction.Done,</b>
&nbsp;    ),
<b class="nc">&nbsp;    keyboardActions: KeyboardActions = KeyboardActions(),</b>
<b class="pc">&nbsp;) {</b>
<b class="fc">&nbsp;    val quackTextFieldColors = LocalQuackTextFieldColors.current</b>
&nbsp;
&nbsp;    // 리컴포지션이 되는 메인 조건은 Text 가 바뀌었을 때인데 그러면
&nbsp;    // 어차피 항상 재계산 되므로 굳이 remember 를 할 필요가 없음
<b class="fc">&nbsp;    val isPlaceholder = text.isEmpty()</b>
&nbsp;
&nbsp;    // TextField&#39;s TextStyle should not be animated
<b class="fc">&nbsp;    val composeTextStyle = remember(</b>
&nbsp;        key1 = textStyle,
&nbsp;        key2 = isPlaceholder,
&nbsp;    ) {
<b class="fc">&nbsp;        textStyle.change(</b>
<b class="fc">&nbsp;            color = QuackTextFieldColors.textColor(</b>
<b class="fc">&nbsp;                isPlaceholder = isPlaceholder,</b>
&nbsp;            ),
<b class="fc">&nbsp;        ).asComposeStyle()</b>
&nbsp;    }
&nbsp;
<b class="pc">&nbsp;    BasicTextField(</b>
<b class="fc">&nbsp;        modifier = Modifier</b>
<b class="fc">&nbsp;            .applyQuackSize(</b>
<b class="fc">&nbsp;                width = width,</b>
<b class="fc">&nbsp;                height = height,</b>
&nbsp;            )
<b class="fc">&nbsp;            .drawUnderBarWithAnimation(</b>
<b class="fc">&nbsp;                width = QuackTextFieldUnderBarHeight,</b>
<b class="fc">&nbsp;                color = QuackTextFieldColors.underBarColor(</b>
<b class="fc">&nbsp;                    isError = isError,</b>
&nbsp;                ),
&nbsp;            )
<b class="fc">&nbsp;            .background(</b>
<b class="fc">&nbsp;                color = QuackColor.White.composeColor,</b>
&nbsp;            )
<b class="fc">&nbsp;            .padding(</b>
<b class="fc">&nbsp;                top = textStyle.calcQuackTextFieldTopPadding(),</b>
<b class="fc">&nbsp;                bottom = QuackTextFieldBottomPadding,</b>
&nbsp;            ),
<b class="fc">&nbsp;        value = text,</b>
<b class="fc">&nbsp;        onValueChange = onTextChanged,</b>
<b class="fc">&nbsp;        textStyle = composeTextStyle,</b>
<b class="fc">&nbsp;        keyboardOptions = keyboardOptions,</b>
<b class="fc">&nbsp;        keyboardActions = keyboardActions,</b>
&nbsp;        // TextField is always single line
&nbsp;        // TextArea is always multi line
<b class="fc">&nbsp;        singleLine = true,</b>
<b class="fc">&nbsp;        cursorBrush = quackTextFieldColors.textFieldCursorColor.toBrush(),</b>
<b class="fc">&nbsp;        decorationBox = { textField -&gt;</b>
<b class="pc">&nbsp;            QuackTextFieldDecorationBox(</b>
<b class="fc">&nbsp;                textField = textField,</b>
&nbsp;                // placeholder is displayed when text is empty
<b class="pc">&nbsp;                placeholderContent = when (isPlaceholder &amp;&amp; placeholderText != null) {</b>
<b class="fc">&nbsp;                    true -&gt; {</b>
<b class="fc">&nbsp;                        {</b>
<b class="pc">&nbsp;                            Text(</b>
<b class="fc">&nbsp;                                text = placeholderText,</b>
<b class="fc">&nbsp;                                style = composeTextStyle,</b>
<b class="fc">&nbsp;                                maxLines = 1,</b>
<b class="fc">&nbsp;                                softWrap = false,</b>
<b class="fc">&nbsp;                                overflow = TextOverflow.Ellipsis,</b>
<b class="nc">&nbsp;                            )</b>
&nbsp;                        }
&nbsp;                    }
<b class="fc">&nbsp;                    else -&gt; null</b>
&nbsp;                },
<b class="fc">&nbsp;                leadingContent = leadingContent,</b>
<b class="fc">&nbsp;                trailingContent = trailingContent,</b>
<b class="nc">&nbsp;            )</b>
&nbsp;        },
&nbsp;    )
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;/**
&nbsp; * A decoration box used to draw decoration items for [QuackBasicTextField].
&nbsp; *
&nbsp; * @param textField BasicTextField to be treated as QuackTextField
&nbsp; * @param placeholderContent A placeholder content to display when the entered text is empty
&nbsp; * @param leadingContent The leading content of QuackTextField
&nbsp; * @param trailingContent The trailing content of QuackTextField
&nbsp; *
&nbsp; * @see QuackTextFieldDecorationContentHorizontalPadding
&nbsp; */
&nbsp;@Composable
&nbsp;private fun QuackTextFieldDecorationBox(
&nbsp;    textField: @Composable () -&gt; Unit,
&nbsp;    placeholderContent: (@Composable () -&gt; Unit)?,
&nbsp;    leadingContent: (@Composable () -&gt; Unit)?,
&nbsp;    trailingContent: (@Composable () -&gt; Unit)?,
<b class="pc">&nbsp;) {</b>
<b class="fc">&nbsp;    Layout(</b>
&nbsp;        content = {
<b class="pc">&nbsp;            val padding = remember(</b>
<b class="fc">&nbsp;                key1 = leadingContent != null,</b>
<b class="fc">&nbsp;                key2 = trailingContent != null,</b>
&nbsp;            ) {
<b class="fc">&nbsp;                PaddingValues(</b>
<b class="fc">&nbsp;                    start = if (leadingContent != null) {</b>
<b class="fc">&nbsp;                        QuackTextFieldDecorationContentHorizontalPadding</b>
&nbsp;                    } else {
<b class="fc">&nbsp;                        0.dp</b>
&nbsp;                    },
<b class="fc">&nbsp;                    end = if (trailingContent != null) {</b>
<b class="fc">&nbsp;                        QuackTextFieldDecorationContentHorizontalPadding</b>
&nbsp;                    } else {
<b class="fc">&nbsp;                        0.dp</b>
&nbsp;                    },
&nbsp;                )
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (leadingContent != null) {</b>
<b class="fc">&nbsp;                Box(</b>
<b class="fc">&nbsp;                    modifier = Modifier.layoutId(</b>
<b class="fc">&nbsp;                        layoutId = QuackTextFieldLeadingContentLayoutId,</b>
&nbsp;                    ),
<b class="fc">&nbsp;                    contentAlignment = Alignment.Center,</b>
&nbsp;                ) {
<b class="pc">&nbsp;                    leadingContent()</b>
<b class="fc">&nbsp;                }</b>
&nbsp;            }
<b class="fc">&nbsp;            if (trailingContent != null) {</b>
<b class="fc">&nbsp;                Box(</b>
<b class="fc">&nbsp;                    modifier = Modifier.layoutId(</b>
<b class="fc">&nbsp;                        layoutId = QuackTextFieldTrailingContentLayoutId,</b>
&nbsp;                    ),
<b class="fc">&nbsp;                    contentAlignment = Alignment.Center,</b>
&nbsp;                ) {
<b class="pc">&nbsp;                    trailingContent()</b>
<b class="fc">&nbsp;                }</b>
&nbsp;            }
<b class="fc">&nbsp;            Box(</b>
<b class="fc">&nbsp;                modifier = Modifier</b>
<b class="fc">&nbsp;                    .layoutId(</b>
<b class="fc">&nbsp;                        layoutId = QuackTextFieldLayoutId,</b>
&nbsp;                    )
<b class="fc">&nbsp;                    .padding(</b>
<b class="fc">&nbsp;                        paddingValues = padding,</b>
&nbsp;                    ),
<b class="fc">&nbsp;                propagateMinConstraints = true,</b>
&nbsp;            ) {
<b class="pc">&nbsp;                textField()</b>
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;            if (placeholderContent != null) {</b>
<b class="fc">&nbsp;                Box(</b>
<b class="fc">&nbsp;                    modifier = Modifier</b>
<b class="fc">&nbsp;                        .layoutId(</b>
<b class="fc">&nbsp;                            layoutId = QuackTextFieldPlaceholderLayoutId,</b>
&nbsp;                        )
<b class="fc">&nbsp;                        .padding(</b>
<b class="fc">&nbsp;                            paddingValues = padding,</b>
&nbsp;                        ),
<b class="fc">&nbsp;                    propagateMinConstraints = true,</b>
&nbsp;                ) {
<b class="pc">&nbsp;                    placeholderContent()</b>
<b class="fc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="fc">&nbsp;        },</b>
<b class="fc">&nbsp;        measurePolicy = rememberQuackTextFieldMeasurePolicy(),</b>
&nbsp;    )
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;/**
&nbsp; * [QuackCountableTextField]
&nbsp; *
&nbsp; * @param text
&nbsp; * @param onTextChanged
&nbsp; * @param textStyle
&nbsp; * @param placeholderText
&nbsp; * @param maxLength
&nbsp; */
&nbsp;@Composable
&nbsp;public fun QuackCountableTextField(
&nbsp;    text: String,
&nbsp;    onTextChanged: (text: String) -&gt; Unit,
<b class="nc">&nbsp;    textStyle: QuackTextStyle = QuackTextStyle.Body1,</b>
<b class="nc">&nbsp;    placeholderText: String? = null,</b>
&nbsp;    maxLength: Int,
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    QuackTextField(</b>
<b class="nc">&nbsp;        text = text,</b>
<b class="nc">&nbsp;        onTextChanged = { text -&gt;</b>
<b class="nc">&nbsp;            if (text.length &lt;= maxLength) {</b>
<b class="nc">&nbsp;                onTextChanged(text)</b>
&nbsp;            }
&nbsp;        },
<b class="nc">&nbsp;        textStyle = textStyle,</b>
<b class="nc">&nbsp;        placeholderText = placeholderText,</b>
<b class="nc">&nbsp;        trailingContent = {</b>
<b class="nc">&nbsp;            QuackBody2(</b>
<b class="nc">&nbsp;                text = &quot;${text.length} / $maxLength&quot;,</b>
<b class="nc">&nbsp;                color = QuackColor.Gray2,</b>
<b class="nc">&nbsp;            )</b>
&nbsp;        },
&nbsp;    )
<b class="nc">&nbsp;}</b>
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-11-09 13:10</div>
</div>
</body>
</html>
